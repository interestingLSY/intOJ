{% extends 'base.html' %}
{% block title %} {{user[1]}} {% endblock %}
{% block body %}
<div class="ui main">
	<div class="block-mini-box">
		<div style="width: 30%; background-color: #e8e8e899;">
			<img src="https://www.gravatar.com/avatar/{{Email_Hash(user[4])}}.jpg?s=1000" style="width:100%" />
			<div class="contitle"> U{{user[0]}} - {{user[1]}} </div>
		</div>
		<div class="block-mini" style="width: 30%">
			<div class="contitle"> 个性签名 </div>
			<div class="content markdown">
{{user[6]}}
			</div>
			<div class="contitle"> 邮箱地址 </div>
			<div class="content markdown">
{{user[4]}}
			</div>
			<div class="contitle"> 性别 </div>
			<div class="content markdown">
{% if user[5] == 0 %} 男
{% elif user[5] == 1 %} 女
{% else %} Unknown
{% endif %}
			</div>
			{% if user[7] != None %}
			<div class="contitle"> 小组 </div>
			<div class="content markdown">
{{user[7]}}
			</div>
			{% endif %}
			{% if Current_User_Privilege(1) %}
			<a href="/user/{{user[1]}}/edit" class="uncolored">
				<button class="button button-primary button-rounded button-small">
					编辑他的资料
				</button>
			</a>
			{% endif %}
		</div>
		<div class="block-mini" style="width: 30%">
			<div class="contitle"> 统计 </div>
			<div style="width: 100%; height: 100%;">
				<canvas id="submit_cnt" width="100" height="100"></canvas>
			</div>
		</div>
	</div>
</div>
<script>
var labels = [], data = [], bkcol = []

{% for status in range(0,11) %}
	{% set cnt = status_cnt[status] %}
	{% if cnt != 0 %}
		labels.push('{{shortstatus[status]}}')
		data.push({{cnt}})
		bkcol.push('{{statuscolor[status]}}')
	{% endif %}
{% endfor %}

var ctx = $("#submit_cnt")
new Chart(ctx,{
    data: {
		labels: labels,
		datasets: [{
			data: data,
			backgroundColor: bkcol,
			borderWidth: 1
		}]
	},
    type: 'pie', // doughnut
	options: {
		legend: {
            display: true,
            labels: {
                usePointStyle: true
            }
        }
	}
})
</script>
{% endblock %}
